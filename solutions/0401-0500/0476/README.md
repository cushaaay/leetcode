**(№ 476) Number Complement [easy]**

Дано число num. Нужно в его двоичном виде заменить все 1 на 0 и 0 на 1, и полученное число перевести в десятичный вид и вернуть.

**Решение на JavaScript**

```javascript
var findComplement = function(num) {
  let mask = ~0;
  
  while (num & mask) mask <<= 1;
  
  return ~mask & ~num;
};
```

**Объяснение решения**

На первый взгляд кажется можно использовать побитовый оператор `~` чтобы инвертировать биты. Но из-за внутреннего представления отрицательных чисел он будет возвращать не тот результат, который мы ожидаем. Например число 5. После оператора ~5 получится не 2, как хотелось бы, а -6. Потому что в числе нужно хранить еще информацию о знаке.
```
 5:  101
~5: -110 -> -6
а хотелось бы просто 
~5:  010 -> 2 
```
Но внутри все хранится как надо. Поэтому мы будем не сразу возвращать число, а складывать его с маской. Потому что там мы избежим искажений. Чтобы создать маску мы заводим переменную mask и кладем в него инвертированный ноль. В двоичном виде это получится ряд 1: `1111` какой-то длины. Будем ее складывать с исходным числом num до тех пор пока те биты, которые складываются с битами числа num не превратятся в ноль. Для этого на каждой итерацив будем проверять сложение с маской вернуло ноль или нет. Если все биты стали нулями значит сложение вернет ноль. Если получилось не ноль мы сдвигаем бит маски на один влево. Например исходное число 5:
```
 5: 00000101
    &
~0: 11111111
    =
 5: 00000101

сдвигаем маску на один бит влево

 5: 00000101
    &
~2: 11111110
    =
 4: 00000100

еще бит влево

 5: 00000101
    &
~4: 11111100
    =
 4: 00000100

и еще бит влево

 5: 00000101
    &
~8: 11111000
    =
 0: 00000000
```
Маска найдена, теперь остается только ее инвертировать, чтобы начальные единицы превратившись в нули нейтрализовали единицы исходного числа после того как мы это исходное число тоже инвертируем. А нули маски после инвертирования превратятся в единицы и просто перенесут нужную нам часть исходного числа в результат. Этот результат и будет ответ.
```
~5:    11111010
       &
~mask: 00000111
       =
2:     00000010
```

**Ссылка на задачу:** https://leetcode.com/problems/number-complement/